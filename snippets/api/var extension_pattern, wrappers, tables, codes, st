var extension_pattern, wrappers, tables, codes, styleElem; extension_pattern = /\.(md|txt|markdown|xml|rst|textile|js)$/; wrappers = $(".data.highlight").filter(function() {var meta_div, filename; meta_div = $(this).prev(); filename = (meta_div.data("path") || meta_div.find("#raw-url").attr("href")); return (filename || "").match(extension_pattern); }); wrappers.addClass("ghml-wrapper"); tables = wrappers.children("table"); tables.addClass("ghml-table"); tables.html(function(i, html) {return html.replace(/&nbsp;/g, " "); }); codes = tables.find("td:nth-child(3)"); codes.addClass("ghml-code"); styleElem = $(["<style type=text/css>", ".ghml-code.line-data, .ghml-code pre {", "white-space: pre-wrap;", "}", "</style>"].join("")).appendTo(document.head);